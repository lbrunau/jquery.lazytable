!function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}([function(t,n,e){"use strict";function o(t,n){this.generatorFunction=t,this.rows=n,this.current=0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o,o.prototype.clone=function(){var t=new o(this.generatorFunction);return t.rows=this.rows,t.current=this.current,t},o.prototype.getCurrent=function(){return this.current},o.prototype.setCurrent=function(t){t>=0&&t<this.rows.length&&(this.current=t)},o.prototype.next=function(){return this.generatorFunction(this.rows[this.current++])},o.prototype.hasNext=function(){return this.current<this.rows.length},o.prototype.prev=function(){return this.generatorFunction(this.rows[--this.current])},o.prototype.hasPrev=function(){return this.current>0}},function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var n=this,e=this.find("table"),o=this.find("table tbody"),r={debug:!1,trHeight:0,data:[],generator:function(t){return"<tr><td>"+t.join("</td><td>")+"</td></tr>"},startIndex:0,keepExisting:!0,prefetch:0,animationCalcTime:3,appendFn:function(t){o.append(t.join())},prependFn:function(t){o.prepend(t.join())},deleteFn:function(t,n){o.children().slice(t,n).remove()},onInit:null,onRedraw:null},a=$.extend({},r,t),u=new i.default(a.generator,a.data);u.setCurrent(a.startIndex);var c=u.clone(),s=!1,f=!1,l=!1,h=function(){return new Promise(function(t,n){var e=1;!function r(){var i=o.children();i.length>0?window.setTimeout(function(){t(i.get(0))},16):e++<10?window.setTimeout(r,100):n()}()})},m=function(t,n,e){return new Promise(function(o,r){window.requestAnimationFrame(function r(i){var u=[];for(;n()&&window.performance.now()-i<a.animationCalcTime;)u.push(t());u.length>0&&e(u);n()?window.requestAnimationFrame(r):o(u)})})},p=function(){var t=n.scrollTop(),e={top:Math.max(Math.floor(t/a.trHeight)-a.prefetch,0),bottom:Math.min(Math.ceil((t+n.innerHeight())/a.trHeight)+a.prefetch,a.data.length-1)};return e.center=Math.min(Math.floor((e.bottom+e.top)/2),a.data.length-1),e},g=function(){var t={top:c.getCurrent(),bottom:u.getCurrent()};return t.center=Math.min(Math.floor((t.bottom+t.top)/2),a.data.length-1),t},d=function t(){var n=p(),o=g(),r=[];return n.top>o.bottom||n.bottom<o.top?l||(l=!0,r.push(v(n.center).then(function(){return l=!1}).then(t))):(n.bottom>=o.bottom&&r.push(m(function(){return u.next()},function(){return!l&&u.hasNext()&&u.getCurrent()<=n.bottom},function(t){a.appendFn(t),e.css({"margin-bottom":(a.data.length-u.getCurrent())*a.trHeight}),a.debug&&console.log("[jQuery.Lazytable] bot +"+t.length+" rows")})),n.top<o.top&&r.push(m(function(){return c.prev()},function(){return!l&&c.hasPrev()&&c.getCurrent()>n.top},function(t){a.prependFn(t.reverse()),e.css({"margin-top":c.getCurrent()*a.trHeight}),a.debug&&console.log("[jQuery.Lazytable] top +"+t.length+" rows")}))),Promise.all(r).then(function(){if(a.keepExisting||function(){var t=g(),n=p();n.bottom<t.bottom&&(u.setCurrent(n.bottom),a.deleteFn(n.bottom-t.bottom),e.css({"margin-bottom":(a.data.length-n.bottom)*a.trHeight}),a.debug&&console.log("[jQuery.Lazytable] bot -"+(t.bottom-n.bottom)+" rows"));n.top>t.top&&(c.setCurrent(n.top),a.deleteFn(0,n.top-t.top),e.css({"margin-top":n.top*a.trHeight}),a.debug&&console.log("[jQuery.Lazytable] top -"+(n.top-t.top)+" rows"))}(),a.debug){var t=u.getCurrent()-c.getCurrent(),n=e.css("margin-top"),o=parseInt(n.substr(0,n.length-2)),r=e.css("margin-bottom"),i=parseInt(r.substr(0,r.length-2));console.log("[jQuery.Lazytable] nVisible: "+t),console.assert(o+i==(a.data.length-t)*a.trHeight,{message:"margin claculation wrong",nTotal:a.data.length,nVisible:t,top:o,bottom:i,trHeight:a.trHeight})}"function"==typeof a.onRedraw&&a.onRedraw()})},w=function(t){return new Promise(function(e,o){var r=Math.min(Math.max(t*a.trHeight-(n.innerHeight()-a.trHeight)/2,0),n.prop("scrollHeight"));n.scrollTop(r),window.setTimeout(e,16)})},b=function(t){var e=g();return f=t,e.top<=t&&t<e.bottom?new Promise(function(e,o){var r=t*a.trHeight,i=n.scrollTop(),u=n.innerHeight(),c=-1;r+a.trHeight>i+u?c=Math.max(0,r-(u-a.trHeight)):r<i&&(c=r),c>=0&&n.scrollTop(c),window.setTimeout(e,16)}):v(t)},v=function(t){return y(t,!1).then(function(){return w(t)}).then(d)},y=function(t,n){return new Promise(function(o,r){var i=function(){var n=t*a.trHeight,r=a.trHeight*a.data.length,i=r-n-a.trHeight;e.css({"margin-bottom":i,"margin-top":n}),o()};a.deleteFn(0),u.setCurrent(t),c.setCurrent(t),u.hasNext()?(a.appendFn([u.next()]),n?h().then(function(t){var n=window.getComputedStyle(t),e=n.getPropertyValue("height"),o=e.match(/([\.\d]+)px/);a.trHeight=o?parseFloat(o[1]):t.offsetHeight}).then(i):i()):i()})};return n.off("scroll"),n.off("lazytable:focus"),n.off("lazytable:resize"),n.css({"overflow-y":"hidden"}),y(a.startIndex,!0).then(function(){return f=a.startIndex,w(a.startIndex)}).then(d).then(function(){n.css({"overflow-y":"scroll"}),"function"==typeof a.onInit&&a.onInit(),n.on("scroll",function(){d()}),n.on("lazytable:focus",function(t,n,e){b(n).then(function(){"function"==typeof e&&e()})}),n.on("lazytable:resize",function(){s||(s=!0,h().then(function(t){var n,e=window.getComputedStyle(t).getPropertyValue("height"),o=(n=e.match(/([\.\d]+)px/))?parseFloat(n[1]):t.offsetHeight;if(o>0&&o!=a.trHeight){a.trHeight=o;var r=f||Math.min(Math.floor((c.getCurrent()+u.getCurrent())/2),a.data.length-1);return v(r)}if(f)return b(f)}).then(d).finally(function(){s=!1}))})}),this};var o,r=e(0),i=(o=r)&&o.__esModule?o:{default:o}},function(t,n,e){"use strict";!function(t){if("performance"in window==0&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==0){var n=Date.now();performance.timing&&performance.timing.navigationStart&&(n=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-n}}}()},function(t,n,e){"use strict";!function(t){for(var n=0,e=["ms","moz","webkit","o"],o=0;o<e.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[e[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[o]+"CancelAnimationFrame"]||window[e[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var o=(new Date).getTime(),r=Math.max(0,16-(o-n)),i=window.setTimeout(function(){t(o+r)},r);return n=o+r,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}()},function(t,n,e){"use strict";e(3),e(2);var o,r=e(1),i=(o=r)&&o.__esModule?o:{default:o};jQuery.fn.LazyTable=i.default}]);